{% load custom_filters %}

{% extends "backoffice/base.html" %}

{% block title %}Supprimer du stock - {{ produit.nom }}{% endblock %}

{% block content %}
    <h1>R√©duire ou supprimer le produit : {{ produit.nom }}</h1>
    <p>Stock actuel : {{ produit.quantite_stock }}</p>

    <form method="post">
        {% csrf_token %}
        <label for="quantite">Quantit√© √† supprimer :</label><br>
        <select name="quantite" required>
            {% for i in 1|to:produit.quantite_stock %}
                <option value="{{ i }}">{{ i }}</option>
            {% endfor %}
            <option value="tous">üóëÔ∏è Supprimer le produit</option>
        </select><br><br>

        <button type="submit">Valider la suppression</button>
    </form>

    <p><a href="{% url 'gerant_produits' %}">‚¨Ö Retour √† la liste des produits</a></p>
{% endblock %}
<script>
    document.querySelector('form').addEventListener('submit', function(e) {
        const select = document.querySelector('select[name="quantite"]');
        if (select.value === "tous") {
            const confirmDelete = confirm("‚ö†Ô∏è √ätes-vous s√ªr de vouloir supprimer compl√®tement ce produit ?");
            if (!confirmDelete) {
                e.preventDefault();
            }
        }
    });
</script>
